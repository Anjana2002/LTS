{% extends 'admin/index.html.twig' %}

{% block admin_content %}
	<div class="register-page">
		<div class="registration-form">
			<h2>Edit Movie</h2>

			<form method="post" action="{{ path('edit_form', {'id': movie.id}) }}" enctype="multipart/form-data">
				<div class="form-group">
					<label for="title">Title</label>
					<input type="text" name="title" id="title" class="form-control" required value="{{ movie.title }}">
				</div>

				<div class="form-group">
					<label for="director">Director</label>
					<input type="text" name="director" id="director" class="form-control" required value="{{ movie.director }}">
				</div>

				<div class="form-group">
					<label for="cast">Cast</label>
					<textarea name="cast" id="cast" class="form-control" rows="3">{{ movie.cast }}</textarea>
				</div>

				<div class="form-group">
					<label for="genre">Genre</label>
					<select name="genre" id="genre" class="form-control" required>
						{% for g in ['Action','Comedy','Drama','Thriller','Romance','Horror','Animation','Science Fiction'] %}
							<option value="{{ g }}" {% if movie.genre == g %} selected {% endif %}>{{ g }}</option>
						{% endfor %}
					</select>
				</div>

				<div class="form-group">
					<label for="release_date">Release Date</label>
					<input type="date" name="release_date" id="release_date" class="form-control" required value="{{ movie.releaseDate|date('Y-m-d') }}">
				</div>

				<div class="form-group">
					<label for="end_date">End Date</label>
					<input type="date" name="end_date" id="end_date" class="form-control" required value="{{ movie.endDate|date('Y-m-d') }}">
				</div>

				<div class="form-group">
					<label for="duration">Duration (minutes)</label>
					<input type="number" name="duration" id="duration" class="form-control" required value="{{ movie.duration }}">
				</div>

				<div class="form-group">
					<label for="poster">Poster</label>
					<input type="file" name="poster" id="poster" class="form-control" accept="image/*">
					{% if movie.poster %}
						<img src="{{ asset(movie.poster) }}" alt="{{ movie.title }}" style="width:150px; margin-top:10px;">
					{% endif %}
				</div>

				<button type="submit" class="btn-primary">Update Movie</button>
			</form>

			<div class="flash-messages">
				{% for label, messages in app.flashes %}
					{% for message in messages %}
						<div class="flash-{{ label }}">{{ message }}</div>
					{% endfor %}
				{% endfor %}
			</div>
		</div>
	</div>
{% endblock %}
